---
sidebar_position: 30
title: SvelteKit
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Mocky Balboa and SvelteKit

How to use Mocky Balboa with [SvelteKit](https://svelte.dev/).

:::info[Supported versions]

__â‰¥ 2.0.0__

:::

## Installation

<Tabs groupId="package-manager">
  <TabItem value="pnpm" label="pnpm" default>
      ```bash
      pnpm add -D @mocky-balboa/sveltekit
      ```
    </TabItem>
  <TabItem value="npm" label="npm">
    ```bash
    npm install -D @mocky-balboa/sveltekit
    ```
  </TabItem>
  <TabItem value="yarn" label="yarn">
    ```bash
    yarn add -D @mocky-balboa/sveltekit
    ```
  </TabItem>
</Tabs>

## Usage

### Dev mode

In dev mode, all you need to do is enable the Vite plugin in your `vite.config.{ts,js}`

<Tabs groupId="javascript-language">
  <TabItem value="typescript" label="TypeScript" default>
        ```TypeScript
        // vite.config.ts
        import { defineConfig } from "vite";
        import { sveltekit } from "@sveltejs/kit/vite";
        import mockyBalboa from "@mocky-balboa/sveltekit";

        export default defineConfig({
          plugins: [sveltekit(), mockyBalboa()],
        });
        ```
  </TabItem>
  <TabItem value="javascript" label="JavaScript">
      ```JavaScript
      // vite.config.js
      import { defineConfig } from "vite";
      import { sveltekit } from "@sveltejs/kit/vite";
      import mockyBalboa from "@mocky-balboa/sveltekit";

      export default defineConfig({
        plugins: [sveltekit(), mockyBalboa()],
      });
      ```
  </TabItem>
</Tabs>

For plugin options, see the [API reference](https://api-reference.mockybalboa.com/interfaces/_mocky-balboa_vite.MockyBalboaVitePluginOptions).

### Build and serve

Ensure you are using the [@sveltejs/adapter-node](https://www.npmjs.com/package/@sveltejs/adapter-node) adapter. This adapter builds a handler function that is passed to the express server as middleware on the `mocky-balboa-sveltekit` CLI tool.

<Tabs groupId="javascript-language">
  <TabItem value="typescript" label="TypeScript" default>
        ```TypeScript
        // svelte.config.js
        import adapter from "@sveltejs/adapter-node";
        import { vitePreprocess } from "@sveltejs/vite-plugin-svelte";

        /** @type {import('@sveltejs/kit').Config} */
        const config = {
          preprocess: vitePreprocess(),

          kit: {
            adapter: adapter(),
          },
        };

        export default config;
        ```
  </TabItem>
  <TabItem value="javascript" label="JavaScript">
      ```JavaScript
      // svelte.config.js
      import adapter from "@sveltejs/adapter-node";
      import { vitePreprocess } from "@sveltejs/vite-plugin-svelte";

      /** @type {import('@sveltejs/kit').Config} */
      const config = {
        preprocess: vitePreprocess(),

        kit: {
          adapter: adapter(),
        },
      };

      export default config;
      ```
  </TabItem>
</Tabs>

Build your SvelteKit application using the standard `vite build` command.

<Tabs groupId="package-manager">
  <TabItem value="pnpm" label="pnpm" default>
      ```bash
      pnpm vite build
      ```
    </TabItem>
  <TabItem value="npm" label="npm">
    ```bash
    npm vite build
    ```
  </TabItem>
  <TabItem value="yarn" label="yarn">
    ```bash
    yarn vite build
    ```
  </TabItem>
</Tabs>

Now serve your SvelteKit application using the `mocky-balboa-sveltekit` command.

<Tabs groupId="package-manager">
  <TabItem value="pnpm" label="pnpm" default>
      ```bash
      pnpm mocky-balboa-sveltekit
      ```
    </TabItem>
  <TabItem value="npm" label="npm">
    ```bash
    npm mocky-balboa-sveltekit
    ```
  </TabItem>
  <TabItem value="yarn" label="yarn">
    ```bash
    yarn mocky-balboa-sveltekit
    ```
  </TabItem>
</Tabs>

Run `mocky-balboa-sveltekit --help` for usage options or see below for all options.

```bash
Usage: mocky-balboa-sveltekit [options] [dist-dir]

Starts a Node.js http server powered by Express for your SvelteKit application as well as the necessary mocky-balboa servers

Arguments:
  dist-dir                          Path to the directory where your SvelteKit application is built (default: "build")

Options:
  -p, --port [port]                 Port to run the server on (default: "3000")
  --websocket-port [websocketPort]  Port to run the WebSocket server on (default: "58152")
  -h, --hostname [hostname]         Hostname to bind the server to (default: "0.0.0.0")
  -t, --timeout [timeout]           Timeout in milliseconds for the mock server to receive a response from the client (default: "5000")
  --https                           Enable https server. Either https or http server is run, not both. When no --https-cert and --https-key are provided, a self-signed certificate
                                    will be automatically generated.
  --https-cert [certPath]           Optional path to the https certificate file
  --https-ca [caPath]               Optional path to the https Certificate Authority file
  --https-key [keyPath]             Optional path to the https key file
  --help                            display help for command
```

## API reference

[API reference](https://api-reference.mockybalboa.com/modules/_mocky-balboa_vite)

## Mocking requests

By default SvelteKit will perform SSR (server-side rendering) and CSR (client-side rendering) for the initial page load. For subsequent navigation, only CSR is performed. When it comes to mocking the requests for server-side rendering, you will also need to mock the client-side requests, unless you disable CSR.
